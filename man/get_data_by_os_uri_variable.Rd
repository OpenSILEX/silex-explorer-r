% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_data_by_os_uri_variable.R
\name{get_data_by_os_uri_variable}
\alias{get_data_by_os_uri_variable}
\title{Retrieve Data by Scientific Object URI and Experiment Variables}
\usage{
get_data_by_os_uri_variable(
  session,
  experience,
  df_os,
  ls_var_exp = NULL,
  output_dir = NULL
)
}
\arguments{
\item{session}{A connection object containing authentication information and
the GraphQL endpoint URL.}

\item{experience}{A character string, vector, or list identifying the
experiment(s) to query.}

\item{df_os}{A data frame containing at least a \code{uri} column listing the
scientific objects to query.}

\item{ls_var_exp}{Optional data frame of variables by experiment. If
\code{NULL} or empty, the function \code{lsVarByExp()} is called to retrieve
the variables automatically.}

\item{output_dir}{Optional character string specifying the directory where
variable-specific CSV files will be written. If \code{NULL}, no files are created.}
}
\value{
No value is returned explicitly. Retrieved data are exported using
\code{export_data_by_variable_to_csv()}.
}
\description{
This function retrieves scientific data associated with a list of scientific
object URIs while processing experiment-specific variables. Data are fetched
in chunks and in parallel to improve performance, and the results are exported
by variable to CSV files.
}
\details{
The function performs the following steps:
\itemize{
  \item Checks that \code{df_os} contains a \code{uri} column.
  \item Retrieves or generates a unique experiment identifier using
  \code{get_experiment_id()}.
  \item Splits scientific object URIs into chunks to limit the number of IDs
  per request.
  \item Fetches data for each chunk in parallel using
  \code{furrr::future_map()}, with error handling via
  \code{purrr::safely()}.
  \item Combines all retrieved data into a single data frame.
  \item Exports the combined data by variable to CSV files when
  \code{output_dir} is provided.
}
}
